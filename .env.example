# ==========================================
# SEVEN T - Environment Variables
# Copy this file to .env and fill in your values
# ==========================================

# ==================== Server ====================
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:5173
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ==================== Security ====================
# REQUIRED in production - generate with: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-this
# Session (JWT) expiration - examples: 7d, 24h, 1h, 30m (default: 7d)
JWT_EXPIRES_IN=7d

# ==================== Google OAuth (Connexion avec Gmail) ====================
# Create OAuth 2.0 credentials at https://console.cloud.google.com/apis/credentials
# Authorized redirect URI must be: BASE_URL/api/auth/google/callback
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
# URL of the backend as reachable by the browser (for OAuth redirect_uri). In dev with proxy, use same as FRONTEND_URL.
BASE_URL=http://localhost:5173

# ==================== Microsoft Outlook (OAuth2) ====================
# Create an app at https://portal.azure.com → Azure Active Directory → App registrations
# Redirect URI (single-page or web): BASE_URL/api/outlook/callback
# API permissions: Mail.Read, Mail.Send, User.Read (Delegated) + offline_access
OUTLOOK_CLIENT_ID=your-azure-app-client-id
OUTLOOK_CLIENT_SECRET=your-azure-app-client-secret

# ==================== Database (PostgreSQL) ====================
# Example: postgres://user:password@localhost:5432/seven_t
DATABASE_URL=postgres://postgres:postgres@localhost:5432/seven_t

# ==================== AI Services ====================
# Google Gemini (recommended - free tier available)
GEMINI_API_KEY=your-gemini-api-key

# OpenAI (optional - fallback)
OPENAI_API_KEY=sk-your-openai-api-key

# ==================== Email (Transactional) ====================
# SMTP Settings (e.g., SendGrid, Mailgun, Amazon SES)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
EMAIL_FROM=SEVEN T <noreply@seven-t.com>
EMAIL_REPLY_TO=support@seven-t.com

# ==================== Payments (Stripe) ====================
# Get these from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Stripe Price IDs (create in Stripe Dashboard)
STRIPE_PRICE_STARTER=price_starter_monthly
STRIPE_PRICE_PRO=price_pro_monthly
STRIPE_PRICE_BUSINESS=price_business_monthly
STRIPE_PRICE_ENTERPRISE=price_enterprise_monthly

# ==================== Production Only ====================
# Domain for SSL certificate
DOMAIN=seven-t.com

# Premier admin (script: npm run db:create-admin)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change-me
ADMIN_NAME=Admin

# ==================== Optional ====================
# Session navigateur (frontend) - déconnexion après X min d'inactivité (0 = désactivé, défaut: 30)
# À définir dans .env à la racine du frontend ou dans le même .env si monorepo.
# VITE_SESSION_IDLE_MINUTES=30

# Redis (for scaling)
REDIS_URL=redis://localhost:6379

# Sentry (error tracking)
SENTRY_DSN=https://xxx@sentry.io/xxx

# Analytics
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# Debug ingest (optional)
DEBUG_INGEST_URL=http://127.0.0.1:7242
DEBUG_INGEST_ID=31a655ad-0928-4b39-85fe-a1b0063e2ef3

# PaymeTrust (Payment Gateway)
PAYMETRUST_ACCOUNT_ID=
PAYMETRUST_API_KEY=

# ==================== WhatsApp conversation queue ====================
# Debounce (ms) after last message before processing batch (default: 1500)
# CONVERSATION_DEBOUNCE_MS=1500
# Max messages per batch (default: 10)
# CONVERSATION_MAX_BATCH_SIZE=10
# Set to 'false' to disable batching (one response per message, still serialized per conversation)
# CONVERSATION_BATCH_ENABLED=true
